{"componentChunkName":"component---src-templates-blog-js","path":"/AppliedAI/2025/11/25/enterprise-ai-agent-pattern/","result":{"data":{"markdownRemark":{"excerpt":"Proximity Over Specialization In my recent innovation projects, I’ve been designing, building, and validating agentic architectures…","id":"098ea937-b356-5346-85f4-40b27c2013da","frontmatter":{"title":"Enterprise Agentic AI Pattern: Proximity Over Specialization","subtitle":"A production-ready pattern for 2025 and beyond – Mark Roxberry","excerpt":"A deep dive into the architecture pattern that dominated AI agent deployments in 2025: one immutable agent binary, externalized context, and proximity-based execution.","date":"November 28, 2025","author":"Mark Roxberry","featured":true,"pinned":true,"tags":["AppliedAI","AI Agents","Multi-Tenant","Architecture","Enterprise AI"],"postimage":{"alt":"Enterprise Agentic AI Pattern","src":{"absolutePath":"/home/runner/work/markrox.dev/markrox.dev/temp/src/posts/2025-11-25-enterprise-ai-agent-pattern/post.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB5L5KRRgl/8QAGhABAAIDAQAAAAAAAAAAAAAAAQACAxIhEf/aAAgBAQABBQKvqWw6zhC2pWyxe//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABETEQEmFxof/aAAgBAQAGPwIS6ME8Njw1P//EABkQAQEBAQEBAAAAAAAAAAAAAAEAETFBcf/aAAgBAQABPyEIy2PodnkmPsTFHwsEJt//2gAMAwEAAgADAAAAEHg//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EDCG/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EHWS/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWGx8f/aAAgBAQABPxAoZbjPF+o1UBKmu+NkRFHpLYjWlLCPj7BagIUyONtxzBDvVz//2Q=="},"images":{"fallback":{"src":"/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/606cf/post.jpg","srcSet":"/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/ec74d/post.jpg 750w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/e2fc3/post.jpg 1080w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/606cf/post.jpg 1168w","sizes":"100vw"},"sources":[{"srcSet":"/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/b72f4/post.avif 750w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/ccf88/post.avif 1080w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/7477d/post.avif 1168w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/064ad/post.webp 750w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/657d1/post.webp 1080w,\n/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/3cde4/post.webp 1168w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6712328767123287},"resize":{"src":"/static/b2bbdeabf6bf4ddc9ebcba3e767ad91a/47498/post.jpg","height":805,"width":1200}}}}},"html":"<h2>Proximity Over Specialization</h2>\n<p>In my recent innovation projects, I’ve been designing, building, and validating agentic architectures, focusing on the reference architecture, the proof of concept, and the first working implementation. I’ve found it effective to use a consistent immutable runtime model across all agent types, including orchestrator, triage, responder, and extension agents, creating a common orchestration specification that scales and keeps behavior driven by external context with controlled extensibility.</p>\n<p>There are no regional variants or tenant-specific branches, and no one-off forks created for compliance exceptions. The runtime is identical everywhere. The agent runs where the data lives, and all dynamic behavior comes from external artifacts and controlled extension points, not code changes. The design is intentional, preventing the fragmentation that runtime customization creates.</p>\n<h2>Rationale for the Architecture</h2>\n<p><strong>Security needs consistency.</strong><br>\nA single runtime means one SBOM, one digest, and a clear audit path. When asked what runs in a region, you provide the exact artifact identifier.</p>\n<p><strong>Data residency must be automatic.</strong><br>\nThe same container deploys globally. Each agent instance pulls tenant context from its region and becomes compliant without custom builds.</p>\n<p><strong>Upgrades must be predictable.</strong><br>\nWith only one runtime, global rollouts take minutes. Variation moves into versioned, verified data bundles and extensible modules, not the binary.</p>\n<h2>Core Components of the Pattern</h2>\n<h3>Core Immutable Runtime with Modular Extensibility</h3>\n<p>The core runtime never changes per region or tenant. It provides a fixed execution path for stability, observability, and auditability. Flexibility comes from a modular extension layer that supports plugins, adapters, or capability modules. These extensions operate under strict boundaries and are versioned, signed, and controlled.</p>\n<p>The core stays immutable for sanity and consistency.<br>\nExtensions provide flexibility without compromising architecture integrity.<br>\nBehavior remains data-driven, not code-fork driven.</p>\n<h3>Externalized Context</h3>\n<p>Policies, product catalogs, escalation rules, and retrieval indexes exist as signed, versioned artifacts. The runtime pulls and caches them at startup. Replacing these artifacts updates behavior without changing the runtime itself.</p>\n<h3>Deterministic Model Routing</h3>\n<p>Routing follows a predictable sequence:</p>\n<ul>\n<li>Cache first</li>\n<li>Local 8B–70B model next</li>\n<li>Frontier model only when required</li>\n</ul>\n<p>Every escalation is logged and reviewable.</p>\n<h3>Automated Context Compaction</h3>\n<p>Enterprise tenants often provide massive policy or reference documents. The runtime triggers a compactor module using a long-context lightweight model. The compactor generates a deterministic low-temperature summary and returns a fingerprint. The agent continues execution with the compressed context.</p>\n<p>Flow overview:</p>\n<p><svg id=\"mermaid-0\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"flowchart\" style=\"max-width: 2971.046875px;\" viewBox=\"0 0 2971.046875 1150\" role=\"graphics-document document\" aria-roledescription=\"flowchart-v2\"><style>#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#a44141;}#mermaid-0 .error-text{fill:#ddd;stroke:#ddd;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:lightgrey;stroke:lightgrey;}#mermaid-0 .marker.cross{stroke:lightgrey;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:arial,sans-serif;color:#ccc;}#mermaid-0 .cluster-label text{fill:#F9FFFE;}#mermaid-0 .cluster-label span{color:#F9FFFE;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#ccc;color:#ccc;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaid-0 .arrowheadPath{fill:lightgrey;}#mermaid-0 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:lightgrey;fill:none;}#mermaid-0 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaid-0 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaid-0 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaid-0 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaid-0 .cluster text{fill:#F9FFFE;}#mermaid-0 .cluster span{color:#F9FFFE;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id=\"mermaid-0_flowchart-v2-pointEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-pointStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"4.5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-circleEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-circleStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-crossEnd\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-crossStart\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"><g class=\"cluster\" id=\"RegionDeployment\" data-look=\"classic\"><rect style=\"\" x=\"275.40625\" y=\"8\" width=\"2687.640625\" height=\"1045\"></rect><g class=\"cluster-label\" transform=\"translate(1551.1875, 8)\"><foreignObject width=\"136.078125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>RegionDeployment</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"RegionalDataStores\" data-look=\"classic\"><rect style=\"\" x=\"2293.046875\" y=\"677\" width=\"310\" height=\"356\"></rect><g class=\"cluster-label\" transform=\"translate(2376.4453125, 677)\"><foreignObject width=\"143.203125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>RegionalDataStores</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"ContextCompaction\" data-look=\"classic\"><rect style=\"\" x=\"1004.09375\" y=\"28\" width=\"1933.953125\" height=\"191\"></rect><g class=\"cluster-label\" transform=\"translate(1900.8125, 28)\"><foreignObject width=\"140.515625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>ContextCompaction</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"ModelRouter\" data-look=\"classic\"><rect style=\"\" x=\"1004.09375\" y=\"418\" width=\"1598.953125\" height=\"239\"></rect><g class=\"cluster-label\" transform=\"translate(1757.765625, 418)\"><foreignObject width=\"91.609375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>ModelRouter</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"><path d=\"M165.813,451.25L174.945,451.25C184.078,451.25,202.344,451.25,220.609,451.25C238.875,451.25,257.141,451.25,269.773,451.25C282.406,451.25,289.406,451.25,292.906,451.25L296.406,451.25\" id=\"L_U_GW_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_U_GW_0\" data-points=\"W3sieCI6MTY1LjgxMjUsInkiOjQ1MS4yNX0seyJ4IjoyMjAuNjA5Mzc1LCJ5Ijo0NTEuMjV9LHsieCI6Mjc1LjQwNjI1LCJ5Ijo0NTEuMjV9LHsieCI6MzAwLjQwNjI1LCJ5Ijo0NTEuMjV9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M461.781,451.25L465.948,451.25C470.115,451.25,478.448,451.25,486.115,451.25C493.781,451.25,500.781,451.25,504.281,451.25L507.781,451.25\" id=\"L_GW_AR_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_GW_AR_0\" data-points=\"W3sieCI6NDYxLjc4MTI1LCJ5Ijo0NTEuMjV9LHsieCI6NDg2Ljc4MTI1LCJ5Ijo0NTEuMjV9LHsieCI6NTExLjc4MTI1LCJ5Ijo0NTEuMjV9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M674.407,412.25L709.995,369.708C745.584,327.167,816.761,242.083,871.708,199.542C926.656,157,965.375,157,1055.005,157C1144.635,157,1285.177,157,1355.448,157L1425.719,157\" id=\"L_AR_CRAW_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AR_CRAW_0\" data-points=\"W3sieCI6Njc0LjQwNjg4NzIxMzI1NDEsInkiOjQxMi4yNX0seyJ4Ijo4ODcuOTM3NSwieSI6MTU3fSx7IngiOjEwMDQuMDkzNzUsInkiOjE1N30seyJ4IjoxNDI5LjcxODc1LCJ5IjoxNTd9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M1642.422,155.317L1730.026,153.931C1817.63,152.545,1992.839,149.772,2101.276,148.386C2209.714,147,2251.38,147,2279.632,147C2307.883,147,2322.719,147,2330.137,147L2337.555,147\" id=\"L_CRAW_CCALL_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_CRAW_CCALL_0\" data-points=\"W3sieCI6MTY0Mi40MjE4NzUsInkiOjE1NS4zMTcxNTk3MDQ3OTUyMn0seyJ4IjoyMTY4LjA0Njg3NSwieSI6MTQ3fSx7IngiOjIyOTMuMDQ2ODc1LCJ5IjoxNDd9LHsieCI6MjM0MS41NTQ2ODc1LCJ5IjoxNDd9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2554.539,147L2562.624,147C2570.708,147,2586.878,147,2599.129,147C2611.38,147,2619.714,147,2627.404,146.022C2635.095,145.045,2642.144,143.089,2645.668,142.112L2649.192,141.134\" id=\"L_CCALL_CSUM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_CCALL_CSUM_0\" data-points=\"W3sieCI6MjU1NC41MzkwNjI1LCJ5IjoxNDd9LHsieCI6MjYwMy4wNDY4NzUsInkiOjE0N30seyJ4IjoyNjI4LjA0Njg3NSwieSI6MTQ3fSx7IngiOjI2NTMuMDQ2ODc1LCJ5IjoxNDAuMDY0NTE2MTI5MDMyMjZ9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2653.047,88.065L2648.88,87.554C2644.714,87.043,2636.38,86.022,2628.047,85.511C2619.714,85,2611.38,85,2581.38,85C2551.38,85,2499.714,85,2448.047,85C2396.38,85,2344.714,85,2298.047,85C2251.38,85,2209.714,85,2083.551,85C1957.388,85,1746.729,85,1552.737,85C1358.745,85,1181.419,85,1073.397,85C965.375,85,926.656,85,871.011,138.988C815.366,192.977,742.795,300.953,706.51,354.942L670.224,408.93\" id=\"L_CSUM_AR_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_CSUM_AR_0\" data-points=\"W3sieCI6MjY1My4wNDY4NzUsInkiOjg4LjA2NDUxNjEyOTAzMjI2fSx7IngiOjI2MjguMDQ2ODc1LCJ5Ijo4NX0seyJ4IjoyNjAzLjA0Njg3NSwieSI6ODV9LHsieCI6MjQ0OC4wNDY4NzUsInkiOjg1fSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo4NX0seyJ4IjoyMTY4LjA0Njg3NSwieSI6ODV9LHsieCI6MTUzNi4wNzAzMTI1LCJ5Ijo4NX0seyJ4IjoxMDA0LjA5Mzc1LCJ5Ijo4NX0seyJ4Ijo4ODcuOTM3NSwieSI6ODV9LHsieCI6NjY3Ljk5MzExMDA2ODI1OTQsInkiOjQxMi4yNX1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M660.252,490.25L698.199,570.375C736.147,650.5,812.042,810.75,869.349,890.875C926.656,971,965.375,971,1073.397,971C1181.419,971,1358.745,971,1552.737,971C1746.729,971,1957.388,971,2083.551,971C2209.714,971,2251.38,971,2281.486,971C2311.591,971,2330.135,971,2339.408,971L2348.68,971\" id=\"L_AR_METR_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AR_METR_0\" data-points=\"W3sieCI6NjYwLjI1MTg0ODg0NTU5ODgsInkiOjQ5MC4yNX0seyJ4Ijo4ODcuOTM3NSwieSI6OTcxfSx7IngiOjEwMDQuMDkzNzUsInkiOjk3MX0seyJ4IjoxNTM2LjA3MDMxMjUsInkiOjk3MX0seyJ4IjoyMTY4LjA0Njg3NSwieSI6OTcxfSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo5NzF9LHsieCI6MjM1Mi42Nzk2ODc1LCJ5Ijo5NzF9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M714.098,412.25L743.072,396.625C772.045,381,829.991,349.75,878.324,334.125C926.656,318.5,965.375,318.5,1013.174,318.5C1060.974,318.5,1117.854,318.5,1146.294,318.5L1174.734,318.5\" id=\"L_AR_ExtensionLayer_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AR_ExtensionLayer_0\" data-points=\"W3sieCI6NzE0LjA5ODM0MDM5NTQ4MDIsInkiOjQxMi4yNX0seyJ4Ijo4ODcuOTM3NSwieSI6MzE4LjV9LHsieCI6MTAwNC4wOTM3NSwieSI6MzE4LjV9LHsieCI6MTE3OC43MzQzNzUsInkiOjMxOC41fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M665.559,490.25L702.622,551.042C739.685,611.833,813.811,733.417,870.234,794.208C926.656,855,965.375,855,988.234,855C1011.094,855,1018.094,855,1021.594,855L1025.094,855\" id=\"L_AR_ExternalContext_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AR_ExternalContext_0\" data-points=\"W3sieCI6NjY1LjU1ODU3MTk4MTQyNDIsInkiOjQ5MC4yNX0seyJ4Ijo4ODcuOTM3NSwieSI6ODU1fSx7IngiOjEwMDQuMDkzNzUsInkiOjg1NX0seyJ4IjoxMDI5LjA5Mzc1LCJ5Ijo4NTV9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M719.358,490.25L747.454,504.375C775.551,518.5,831.744,546.75,878.534,560.875C925.323,575,962.708,575,981.401,575L1000.094,575\" id=\"L_AR_ModelRouter_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AR_ModelRouter_0\" data-points=\"W3sieCI6NzE5LjM1Nzc2NTE1MTUxNTIsInkiOjQ5MC4yNX0seyJ4Ijo4ODcuOTM3NSwieSI6NTc1fSx7IngiOjEwMDQuMDkzNzUsInkiOjU3NX0seyJ4IjoxNDQ0LjY5NTMxMjUsInkiOjU3NX1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M1589.086,602Z\" id=\"L_ModelRouter_CSH_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ModelRouter_CSH_0\" data-points=\"W3sieCI6MTQ4Ny4wNTQ1ODQwMjMxNzksInkiOjYwMn0seyJ4IjoxNDQ0LjY5NTMxMjUsInkiOjYyNS4zMzMzMzMzMzMzMzM0fSx7IngiOjE0NDQuNjk1MzEyNSwieSI6NjMxLjE2NjY2NjY2NjY2NjZ9LHsieCI6MTUzNi4wNzAzMTI1LCJ5Ijo2Mzd9LHsieCI6MTYyNy40NDUzMTI1LCJ5Ijo2MzEuMTY2NjY2NjY2NjY2Nn0seyJ4IjoxNjI3LjQ0NTMxMjUsInkiOjYyNS4zMzMzMzMzMzMzMzM0fSx7IngiOjE1ODUuMDg2MDQwOTc2ODIxLCJ5Ijo2MDJ9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2378.906,480Z\" id=\"L_ModelRouter_LLMLOCAL_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ModelRouter_LLMLOCAL_0\" data-points=\"W3sieCI6MTYyNy40NDUzMTI1LCJ5Ijo1NjEuMjY0MzI0NDc4MDE0MX0seyJ4IjoyMTY4LjA0Njg3NSwieSI6NDgwfSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo0ODB9LHsieCI6MjM3NC45MDYyNSwieSI6NDgwfV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2370.469,584Z\" id=\"L_ModelRouter_LLMFRONT_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ModelRouter_LLMFRONT_0\" data-points=\"W3sieCI6MTYyNy40NDUzMTI1LCJ5Ijo1NzYuMzAxMjc0NTIzMTM1NX0seyJ4IjoyMTY4LjA0Njg3NSwieSI6NTg0fSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo1ODR9LHsieCI6MjM2Ni40Njg3NSwieSI6NTg0fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2047.047,855L2067.214,855C2087.38,855,2127.714,855,2168.714,855C2209.714,855,2251.38,855,2275.714,855C2300.047,855,2307.047,855,2310.547,855L2314.047,855\" id=\"L_ExternalContext_OSTR_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ExternalContext_OSTR_0\" data-points=\"W3sieCI6MjA0My4wNDY4NzUsInkiOjg1NX0seyJ4IjoyMTY4LjA0Njg3NSwieSI6ODU1fSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo4NTV9LHsieCI6MjMxOC4wNDY4NzUsInkiOjg1NX1d\" marker-start=\"url(#mermaid-0_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2429.794,223L2439.055,812\" id=\"L_ContextCompaction_OSTR_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ContextCompaction_OSTR_0\" data-points=\"W3sieCI6MTY0Mi40MjE4NzUsInkiOjE2MC41MzM5NjQ2MTk5MzAwM30seyJ4IjoyMTY4LjA0Njg3NSwieSI6MTc4fSx7IngiOjIyOTMuMDQ2ODc1LCJ5IjoxNzh9LHsieCI6MjQzOS4xMTc3NzYwMzM5NzMzLCJ5Ijo4MTZ9XQ==\" marker-start=\"url(#mermaid-0_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2369.849,657L2407.973,708.779\" id=\"L_ModelRouter_VDB_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_ModelRouter_VDB_0\" data-points=\"W3sieCI6MTYyNy40NDUzMTI1LCJ5Ijo1ODIuNjYzMDYxMDgwNjg2OH0seyJ4IjoyMTY4LjA0Njg3NSwieSI6NjI4fSx7IngiOjIyOTMuMDQ2ODc1LCJ5Ijo2Mjh9LHsieCI6MjQxMC4zNDQxNzIyOTcyOTc1LCJ5Ijo3MTJ9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M2642.475,1053L2768.055,1086.956\" id=\"L_RegionDeployment_Region2_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_RegionDeployment_Region2_0\" data-points=\"W3sieCI6MjUyMi4wNzAzMTI1LCJ5Ijo3Mzl9LHsieCI6MjYwMy4wNDY4NzUsInkiOjczOX0seyJ4IjoyNjI4LjA0Njg3NSwieSI6NzM5fSx7IngiOjI3NzEuOTE2NTU1ODUxMDY0LCJ5IjoxMDg4fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"translate(220.609375, 451.25)\"><g class=\"label\" data-id=\"L_U_GW_0\" transform=\"translate(-29.796875, -12)\"><foreignObject width=\"59.59375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Request</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_GW_AR_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(887.9375, 157)\"><g class=\"label\" data-id=\"L_AR_CRAW_0\" transform=\"translate(-91.15625, -12)\"><foreignObject width=\"182.3125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Context Exceeds Window</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_CRAW_CCALL_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_CCALL_CSUM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_CSUM_AR_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_AR_METR_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_AR_ExtensionLayer_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(887.9375, 855)\"><g class=\"label\" data-id=\"L_AR_ExternalContext_0\" transform=\"translate(-58.71875, -12)\"><foreignObject width=\"117.4375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Load and Cache</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_AR_ModelRouter_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_ModelRouter_CSH_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_ModelRouter_LLMLOCAL_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(2366.46875, 584)\"><g class=\"label\" data-id=\"L_ModelRouter_LLMFRONT_0\" transform=\"translate(-100, -24)\"><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"edgeLabel\"><p>Escalate on Low Confidence</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_ExternalContext_OSTR_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_ContextCompaction_OSTR_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_ModelRouter_VDB_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_RegionDeployment_Region2_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"root\" transform=\"translate(1021.09375, 770.5)\"><g class=\"clusters\"><g class=\"cluster\" id=\"ExternalContext\" data-look=\"classic\"><rect style=\"\" x=\"8\" y=\"8\" width=\"1013.953125\" height=\"153\"></rect><g class=\"cluster-label\" transform=\"translate(458.0546875, 8)\"><foreignObject width=\"113.84375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>ExternalContext</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"></g><g class=\"edgeLabels\"></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-POL-9\" transform=\"translate(173, 84.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-130\" y=\"-39\" width=\"260\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-100, -24)\"><rect></rect><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"nodeLabel\"><p>Policy Bundles Signed Versioned</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CAT-10\" transform=\"translate(429.6875, 84.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-76.6875\" y=\"-27\" width=\"153.375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-46.6875, -12)\"><rect></rect><foreignObject width=\"93.375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Domain Data</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-ESC-11\" transform=\"translate(645.9609375, 84.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-89.5859375\" y=\"-27\" width=\"179.171875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-59.5859375, -12)\"><rect></rect><foreignObject width=\"119.171875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Escalation Rules</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-RAG-12\" transform=\"translate(886.25, 84.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-100.703125\" y=\"-27\" width=\"201.40625\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-70.703125, -12)\"><rect></rect><foreignObject width=\"141.40625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>RAG Index Sources</p></span></div></foreignObject></g></g></g></g><g class=\"root\" transform=\"translate(1170.734375, 246)\"><g class=\"clusters\"><g class=\"cluster\" id=\"ExtensionLayer\" data-look=\"classic\"><rect style=\"\" x=\"8\" y=\"8\" width=\"714.671875\" height=\"129\"></rect><g class=\"cluster-label\" transform=\"translate(310.1875, 8)\"><foreignObject width=\"110.296875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>ExtensionLayer</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"></g><g class=\"edgeLabels\"></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-EX1-4\" transform=\"translate(158.828125, 72.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-115.828125\" y=\"-27\" width=\"231.65625\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-85.828125, -12)\"><rect></rect><foreignObject width=\"171.65625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Policy Engine Extension</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-EX2-5\" transform=\"translate(412.0234375, 72.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-87.3671875\" y=\"-27\" width=\"174.734375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-57.3671875, -12)\"><rect></rect><foreignObject width=\"114.734375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Domain Adapter</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-EX3-6\" transform=\"translate(618.53125, 72.5)\"><rect class=\"basic label-container\" style=\"\" x=\"-69.140625\" y=\"-27\" width=\"138.28125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-39.140625, -12)\"><rect></rect><foreignObject width=\"78.28125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Tool Plugin</p></span></div></foreignObject></g></g></g></g><g class=\"node default\" id=\"flowchart-U-0\" transform=\"translate(86.90625, 451.25)\"><rect class=\"basic label-container\" style=\"\" x=\"-78.90625\" y=\"-27\" width=\"157.8125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-48.90625, -12)\"><rect></rect><foreignObject width=\"97.8125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>User or Client</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-GW-1\" transform=\"translate(381.09375, 451.25)\"><rect class=\"basic label-container\" style=\"\" x=\"-80.6875\" y=\"-27\" width=\"161.375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-50.6875, -12)\"><rect></rect><foreignObject width=\"101.375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>API or Ingress</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-AR-3\" transform=\"translate(641.78125, 451.25)\"><rect class=\"basic label-container\" style=\"\" x=\"-130\" y=\"-39\" width=\"260\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-100, -24)\"><rect></rect><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"nodeLabel\"><p>Core Immutable Agent Runtime</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CSH-15\" transform=\"translate(1536.0703125, 575)\"><rect class=\"basic label-container\" style=\"\" x=\"-91.375\" y=\"-27\" width=\"182.75\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-61.375, -12)\"><rect></rect><foreignObject width=\"122.75\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Response Cache</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-LLMLOCAL-16\" transform=\"translate(2448.046875, 480)\"><rect class=\"basic label-container\" style=\"\" x=\"-73.140625\" y=\"-27\" width=\"146.28125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-43.140625, -12)\"><rect></rect><foreignObject width=\"86.28125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Local Model</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-LLMFRONT-17\" transform=\"translate(2448.046875, 584)\"><rect class=\"basic label-container\" style=\"\" x=\"-81.578125\" y=\"-27\" width=\"163.15625\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-51.578125, -12)\"><rect></rect><foreignObject width=\"103.15625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Frontier Model</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CRAW-26\" transform=\"translate(1536.0703125, 157)\"><rect class=\"basic label-container\" style=\"\" x=\"-106.3515625\" y=\"-27\" width=\"212.703125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-76.3515625, -12)\"><rect></rect><foreignObject width=\"152.703125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Large Tenant Context</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CCALL-27\" transform=\"translate(2448.046875, 147)\"><rect class=\"basic label-container\" style=\"\" x=\"-106.4921875\" y=\"-27\" width=\"212.984375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-76.4921875, -12)\"><rect></rect><foreignObject width=\"152.984375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Compactor SubAgent</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CSUM-28\" transform=\"translate(2783.046875, 104)\"><rect class=\"basic label-container\" style=\"\" x=\"-130\" y=\"-39\" width=\"260\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-100, -24)\"><rect></rect><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"nodeLabel\"><p>Compacted Summary With Fingerprint</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VDB-37\" transform=\"translate(2448.046875, 739)\"><rect class=\"basic label-container\" style=\"\" x=\"-74.0234375\" y=\"-27\" width=\"148.046875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-44.0234375, -12)\"><rect></rect><foreignObject width=\"88.046875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Vector Store</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-OSTR-38\" transform=\"translate(2448.046875, 855)\"><rect class=\"basic label-container\" style=\"\" x=\"-130\" y=\"-39\" width=\"260\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-100, -24)\"><rect></rect><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"nodeLabel\"><p>Object Store Artifacts Summaries</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-METR-39\" transform=\"translate(2448.046875, 971)\"><rect class=\"basic label-container\" style=\"\" x=\"-95.3671875\" y=\"-27\" width=\"190.734375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-65.3671875, -12)\"><rect></rect><foreignObject width=\"130.734375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Logs Metrics Audit</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-Region2-49\" transform=\"translate(2783.046875, 1115)\"><rect class=\"basic label-container\" style=\"\" x=\"-96.7109375\" y=\"-27\" width=\"193.421875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-66.7109375, -12)\"><rect></rect><foreignObject width=\"133.421875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Additional Regions</p></span></div></foreignObject></g></g></g></g></g></svg></p>\n<h2>Engineering Work That Made It Practical</h2>\n<ul>\n<li>Compaction runs deterministically and is precomputed during policy deployment.</li>\n<li>Every artifact, raw or summarized, carries a stable fingerprint for audit trails.</li>\n<li>Compaction includes PII stripping; if too much content is removed, deployment halts.</li>\n<li>Pre-loading compacted blobs reduces cold-start latency.</li>\n<li>Local-model speculation reduces frontier model calls by more than half.</li>\n<li>Extension modules are versioned artifacts, not ad-hoc code injections.</li>\n</ul>\n<h2>Results After Long-Term Use</h2>\n<ul>\n<li>Audits validated through a single runtime digest</li>\n<li>Global patching consolidated into one predictable rollout</li>\n<li>Frontier model usage reduced to exceptional cases only</li>\n<li>No regional forks and no tenant-specific binaries</li>\n</ul>\n<h2>Closing</h2>\n<p>A single immutable runtime with externalized context and modular extensibility, deployed close to the data, is the pattern that consistently avoids the failure modes I experienced in other approaches.</p>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/architecture/guide/multitenant/approaches/ai-ml\">Architectural approaches for AI and ML in multitenant solutions</a></li>\n<li><a href=\"https://isurusiri.medium.com/multi-tenancy-in-ai-agentic-systems-9c259c8694ac\">Multi-tenancy in AI Agentic Systems</a></li>\n<li><a href=\"https://newsroom.workday.com/2025-11-19-Workday-Launches-Workday-EU-Sovereign-Cloud-to-Unlock-Enterprise-AI-With-Full-EU-Data-Residency-and-Control\">Workday Launches Workday EU Sovereign Cloud to Unlock Enterprise AI With Full EU Data Residency and Control</a></li>\n<li><a href=\"https://www.techbuzz.ai/articles/openai-expands-data-residency-for-enterprise-customers\">OpenAI Expands Data Residency for Enterprise Customers</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/ai-foundry/openai/concepts/model-router\">Model router for Microsoft Foundry concepts</a></li>\n<li><a href=\"https://tetrate.io/press/tetrate-launches-agent-router-service-to-streamline-genai-cost-control-and-model-reliability-for-developers\">Tetrate Launches Agent Router Service to Streamline GenAI Cost Control and Model Reliability for Developers</a></li>\n<li><a href=\"https://www.anthropic.com/engineering/effective-context-engineering-for-ai-agents\">Effective context engineering for AI agents – Anthropic</a></li>\n<li><a href=\"https://jxnl.co/writing/2025/08/30/context-engineering-compaction\">Two Experiments We Need to Run on AI Agent Compaction – jxnl.co</a></li>\n<li><a href=\"https://medium.com/@fendylike/why-ai-agent-startups-should-build-scalable-infrastructure-from-day-one-f3d4faf17d80\">Why AI Agent Startups Should Build Scalable Infrastructure From Day One</a></li>\n</ul>\n<h2>Credits</h2>\n<h3>Image</h3>\n<ul>\n<li>Image generated with DALL·E (OpenAI); edited by Mark Roxberry</li>\n</ul>"}},"pageContext":{"slug":"/AppliedAI/2025/11/25/enterprise-ai-agent-pattern/"}},"staticQueryHashes":["1460613570","2052298874","2446865869","717330468"],"slicesMap":{}}